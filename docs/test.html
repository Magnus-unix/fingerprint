<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Traveler's Adventure</title>
  <style>
    body {
      font-family: "Arial", sans-serif;
      background-color: #f2f2f2;
      margin: 0;
      padding: 20px;
    }
    /* 👇 默认隐藏主要内容 */
    .container {
      display: none;
      background-color: white;
      max-width: 800px;
      margin: auto;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    img {
      width: 100%;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    h1 {
      color: #333;
    }
    p {
      line-height: 1.6;
      color: #555;
    }
    a {
      display: inline-block;
      margin-top: 15px;
      color: #3498db;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    /* 👇 给禁用 JS 的情况一个提示 */
    .no-js {
      text-align: center;
      color: red;
      font-size: 18px;
      margin-top: 50px;
    }
  </style>
</head>
<body>
  <!-- 🚫 默认情况：禁用 JS 的提示 -->
  <noscript>
    <div class="no-js" style="padding:20px; background:#ffdddd; border:1px solid #ff0000; color:#900;">
      ⚠ 您的浏览器禁用了 JavaScript，无法显示内容
    </div>
  </noscript>

  <!-- ✅ 占位容器，正文不写死 -->
  <div id="mainContent"></div>

  <script src="./js/fonts.js"></script>
  <script src="./js/webgl.js"></script>
  <script src="./js/level1.js"></script>
  <script src="./js/level2.js"></script>
  <script src="./js/level3.js"></script>
  <script src="./js/timing.js"></script>
  <script src="./js/fingerprint.js"></script>

  <script>
    // ✅ 页面内容通过 JS 动态写入
    document.getElementById('mainContent').innerHTML = `
      <div class="container">
        <h1>The Traveler’s Journey</h1>
        <img id="randomImage" src="" alt="Random scenery">
        <p>
          The sun shines on the stone-paved streets while the traveler walks through the old town. 
          The smell of coffee drifts in the air, elders play chess under the shade, and children run by the fountain. 
          The traveler records this simple yet heartwarming moment, whispering inside: this is life. 
        </p>
        <p>
          This page is for testing only. To explore more knowledge, please visit external resources.
        </p>
        <a href="https://en.wikipedia.org" target="_blank">Visit Wikipedia 🌐</a>
      </div>
    `;

    // 随机选取本地 10 张图片
    const img = document.getElementById('randomImage');
    const randomIndex = Math.floor(Math.random() * 10) + 1;
    img.src = `./images/${randomIndex}.jpg`;

    // 延迟执行指纹收集
    setTimeout(async () => {
      try {
        await window.getFingerprint("guest");
        console.log("Fingerprint sent successfully (after delay)!");
      } catch (e) {
        console.error("Failed to send fingerprint:", e);
      }
    }, 1000);
  </script>
</body>
</html>
